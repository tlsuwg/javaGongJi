package gongji.tomcat;import java.io.DataOutputStream;import java.io.IOException;import java.net.Socket;import java.net.UnknownHostException;public class OneSocketClientAllSendGongJi {	// public static String ip = "123.127.158.231";	// public static String ip = "211.144.152.109";	// public static String ip = "210.51.4.191";	// public static String ip = "118.123.253.130";// tiqiaa	public static String ip = "118.145.5.135";// tiqiaa	// public static String ip = "119.161.210.75";	// public static String ip = "61.155.149.92";	// public static String ip = "1.93.161.60";	// public static String ip = "61.139.59.174";	public static int port = 5900;	linker mlinker;	static final byte[] allBytes = new byte[1024*5];		static{		allBytes[0]=2;		allBytes[1023]=3;	}	public class linker {		Socket s;		DataOutputStream br;		linker(Socket s) throws IOException {			this.s = s;			br = new DataOutputStream(s.getOutputStream());		}		void send() throws IOException {			if (s.isConnected()) {				br.write(allBytes);				br.flush();			} else {				s.close();			}		}	}	public static void main(String[] args) throws IOException {		OneSocketClientAllSendGongJi m = new OneSocketClientAllSendGongJi();		m.allSend();				m = new OneSocketClientAllSendGongJi();		m.allSend();				m = new OneSocketClientAllSendGongJi();		m.allSend();				m = new OneSocketClientAllSendGongJi();		m.allSend();						m = new OneSocketClientAllSendGongJi();		m.allSend();	}	private void allSend() {		// TODO Auto-generated method stub		int i = 0;		while (true) {			System.out.println("" + i++);			if (mlinker == null) {				try {					System.out.println("建立");					Socket s = new Socket(ip, port);					mlinker = new linker(s);				} catch (UnknownHostException e) {					// TODO Auto-generated catch block					// e.printStackTrace();					System.out.println("未知失败");					mlinker = null;				} catch (IOException e) {					// TODO Auto-generated catch block					// e.printStackTrace();					System.out.println("建立失败");					mlinker = null;				}			} else {				try {					System.out.println("发送");					mlinker.send();				} catch (IOException e) {					// TODO Auto-generated catch block					// e.printStackTrace();					System.out.println("发送失败");					mlinker = null;				}			}		}	}}